<div class="container">
  <div class="row">
    <div class="col-sm-1">#</div>
    <div class="col-sm-1">Category</div>
    <div class="col-sm-2">Title</div>
    <div class="col-sm-3">Description</div>
    <div class="col-sm-2">Due Date</div>
    <div class="col-sm-1">Priority</div>
    <div class="col-sm-1">Status</div>
  </div>
  <div *ngIf="!isEditing">
    <div class="row" *ngFor="let task of taskList | orderBy : order">
      <div class="col-sm-1">
        <span>{{ task.taskId }}</span>
      </div>
      <div class="col-sm-1">
        <span>{{ task.categoryName }}</span>
      </div>
      <div class="col-sm-2">
        <span>{{ task.title }}</span>
      </div>
      <div class="col-sm-3">
        <span>{{ task.description }}</span>
      </div>
      <div class="col-sm-2">
        <span>{{ task.dueDate }}</span>
      </div>
      <div class="col-sm-1">
        <i
          [ngClass]="{
            'bi bi-arrow-down': task.priority === 'low',
            'bi bi-justify': task.priority === 'medium',
            'bi bi-arrow-up': task.priority === 'high'
          }"
        >
        </i>
      </div>
      <div class="col-sm-1">
        <i
          [ngClass]="{
            'bi bi-card-list': task.status === 'open',
            'bi bi-arrow-clockwise': task.status === 'ongoing',
            'bi bi-check-lg': task.status === 'completed',
            'bi bi-alarm': task.status === 'overdue'
          }"
        >
        </i>
      </div>
      <div class="col-sm-1">
        <button
          (click)="onDeleteTask(task.taskId)"
          class="btn btn-danger btn-sm"
        >
          <i class="bi bi-trash3"></i>
        </button>

        <button class="btn btn-edit btn-sm" (click)="onEditTask(task)">
          <i class="bi bi-pencil-square"></i>
        </button>
      </div>
    </div>
  </div>

  <div class="row" *ngFor="let task of taskList | orderBy : order">
    <div *ngIf="isEditing && taskToBeEdited.taskId === task.taskId">
      <input
        type="text"
        id="title"
        name="title"
        value="{{ task.title }}"
        required
        minlength="5"
        [(ngModel)]="task.title"
      />
      <input
        type="date"
        id="dueDate"
        name="dueDate"
        value="{{ task.dueDate }}"
        [(ngModel)]="task.dueDate"
      />
      <input
        type="text"
        id="description"
        name="description"
        value="{{ task.description }}"
        required
        minlength="5"
        [(ngModel)]="task.description"
      />

      <label for="priority">
        <select name="priority" [(ngModel)]="task.priority">
          <option
            *ngFor="let priority of priorityValues"
            [selected]="priority === task.priority"
          >
            {{ priority }}
          </option>
        </select>
      </label>

      <label for="status">
        <select name="status" [(ngModel)]="task.status">
          <option
            *ngFor="let status of statusValues"
            [selected]="status === task.status"
          >
            {{ status }}
          </option>
        </select>
      </label>

      <div class="col-sm">
        <button class="btn btn-success btn-sm" (click)="onUpdateTask(task)">
          <i class="bi bi-save"></i>
        </button>
      </div>
      <div class="col-sm">
        <button
          (click)="onCancelEdit()"
          class="btn btn-warning btn-cancel btn-sm"
        >
          <i class="bi bi-x-circle"></i>
        </button>
      </div>
    </div>
  </div>
</div>
